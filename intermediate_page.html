<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bienvenue - Ocean Farmers</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="intermediate-body">

    <div class="glass-effect-box"> <p id="userNameDisplay" class="salaried-name-display"></p>
        <p class="welcome-message-secondary">BIENVENUE SUR VOTRE ESPACE DE VOTE PERSONNALISÉE !!!!</p>
    </div>

    <p class="redirection-message">
        Vous allez être redirigé(e) vers la page de vote dans <strong id="countdown">8</strong> secondes...
    </p>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const userNameDisplay = document.getElementById('userNameDisplay');
            const countdownElement = document.getElementById('countdown');
            const glassEffectBox = document.querySelector('.glass-effect-box'); // Sélectionne la nouvelle bulle

            // Récupérer le nom de l'utilisateur stocké dans localStorage
            const loggedInUserName = localStorage.getItem('loggedInUserName');

            if (loggedInUserName) {
                userNameDisplay.textContent = loggedInUserName;
            } else {
                userNameDisplay.textContent = "Salarié non identifié";
                // Optionnel: rediriger vers la page d'authentification si non identifié
                // window.location.replace('authentification.html');
            }

            // Ajouter la classe pour l'animation d'apparition de la vitre
            setTimeout(() => {
                glassEffectBox.classList.add('show-glass-effect');
            }, 100); // Petit délai pour assurer que l'élément est rendu avant l'animation

            let timeLeft = 8;
            countdownElement.textContent = timeLeft;

            const countdownInterval = setInterval(function() {
                timeLeft--;
                countdownElement.textContent = timeLeft;

                if (timeLeft <= 0) {
                    clearInterval(countdownInterval);
                    window.location.replace('vote.html');
                }
            }, 1000);

            // Empêcher le retour arrière
            history.pushState(null, document.title, location.href);
            window.addEventListener('popstate', function (event) {
                history.pushState(null, document.title, location.href);
            });
        });
    </script>
</body>
</html>